pages:
  - name: Home
    # Optionally, if you only have a single page you can hide the desktop navigation for a cleaner look
    
    columns:
      - size: small
        widgets:
          - type: custom-api
            height: 200px
            title: Random Cat
            cache: 2m
            url: https://cataas.com/cat?width=300&json=true
            template: |
              <img style="border-radius:5px" src="{{ .JSON.String "url" }}"></img> 

          - type: rss
            limit: 10
            collapse-after: 3
            cache: 12h
            feeds:
              - url: https://selfh.st/rss/
                title: selfh.st
                limit: 4
              - url: https://ciechanow.ski/atom.xml
              - url: https://www.joshwcomeau.com/rss.xml
                title: Josh Comeau
              - url: https://samwho.dev/rss.xml
              - url: https://ishadeed.com/feed.xml
                title: Ahmad Shadeed

              


      - size: full
        widgets:
          - type: group
            widgets:
              - type: hacker-news
              - type: lobsters


          - type: videos
            channels:
              - UCR-DXc1voovS8nhAvccRZhg # Jeff Geerling
              - UCsBjURrPoezykLs9EqgamOA # Fireship
              - UC68TLK0mAEzUyHx5x5k-S1Q # Jeff Nippard

      - size: small
        widgets:
          - type: custom-api
            title: F1 Next Race
            cache: 5m
            url: https://${F1_API_HOSTNAME}/f1/next_race/
            template: |
              <div class="flex flex-column gap-10">
                {{ $session := index (.JSON.Array "race") 0 }}
                <p class="size-h5">
                  {{ .JSON.String "season" }}, Round {{ .JSON.String "round" }}
                </p>

                <div class="margin-block-4">
                  <p class="color-highlight">{{ $session.String "raceName" }}</p>
                  <p class="color-primary">
                    <span>
                      {{ .JSON.String "next_event.session" }}
                    </span>
                    {{ $datetime := .JSON.String "next_event.datetime" }}
                    <span
                      class="color-highlight"
                      {{ parseRelativeTime "rfc3339" $datetime }}
                    ></span>
                  </p>
                  <p class="size-h5">
                    {{ .JSON.String "next_event.date" }} @  {{ .JSON.String "next_event.time" }}
                  </p>

                  <div style="margin-block: 1rem;">
                    <img
                      src="https://${F1_API_HOSTNAME}/f1/next_map/"
                      onerror="this.style.display='none'"
                      style="max-width: 100%; height: auto; border-radius: 8px;"
                    />
                  </div>

                  <p class="color-highlight">
                    Circuit Details
                  </p>
                  <p class="size-h6">
                    Name: {{ $session.String "circuit.circuitName" }}
                  </p>
                  <p class="size-h6">
                    Lap Record: {{ $session.String "circuit.lapRecord" }}, {{ $session.String "circuit.fastestLapDriverName" }} ({{ $session.String "circuit.fastestLapYear"}})
                  </p>
                  <p class="size-h6">
                    Length: {{ $session.String "laps" }} laps @ {{ $session.String "circuit.circuitLengthKm" }} KMs
                  </p>
                </div>
              </div>

          - type: custom-api
            title: Drivers Standings
            cache: 5m
            url: https://${F1_API_HOSTNAME}/f1/drivers_standings/
            template: |
              <ul class="list collapsible-container" data-collapse-after="3">
                {{ range $i, $v := .JSON.Array "drivers" }}
                <li class="flex items-center {{ if eq $i 0 }}color-primary{{ else if eq $i 1 }}color-highlight{{ end }}">
                  <div class="grow min-width-0">
                    <span>{{ .String "position" }}. {{ .String "surname" }} <img src="https://flagcdn.com/w20/{{ .String "flag" }}.png"
                          alt=""
                          style="width: 20px; height: 14px; object-fit: cover; vertical-align: middle"
                          class="inline-block rounded-sm" /> </span>
                    {{ $id := .String "teamId" }}
                      <span class="size-h6">
                        ( {{- if eq $id "red_bull" -}}Red Bull
                        {{- else if eq $id "aston_martin" -}}Aston Martin
                        {{- else if eq $id "mercedes" -}}Mercedes
                        {{- else if eq $id "ferrari" -}}Ferrari
                        {{- else if eq $id "mclaren" -}}McLaren
                        {{- else if eq $id "williams" -}}Williams
                        {{- else if eq $id "alpine" -}}Alpine
                        {{- else if eq $id "haas" -}}Haas
                        {{- else if eq $id "rb" -}}RB
                        {{- else if eq $id "sauber" -}}Sauber
                        {{- else -}}{{ $id }}{{- end -}})
                      </span>
                  </div>
                  <span class="shrink-0 text-right">{{ .String "points" }}</span>
                </li>
                {{ end }}
              </ul>

          - type: custom-api
            title: Constructors Standings
            cache: 5m
            url: https://${F1_API_HOSTNAME}/f1/constructors_standings/
            template: |
              <ul class="list collapsible-container" data-collapse-after="5">
                {{ range $i, $v := .JSON.Array "constructors" }}
                <li class="flex items-center {{ if eq $i 0 }}color-primary{{ else if eq $i 1 }}color-highlight{{ end }}">
                  <span class="grow min-width-0">
                    {{ .String "position" }}. {{ .String "team" }}<span style="margin-left: 2px;">
                      <img src="https://flagcdn.com/w20/{{ .String "flag" }}.png"
                          alt=""
                          style="width: 20px; height: 14px; object-fit: cover; vertical-align: middle"
                          class="inline-block rounded-sm" />
                    </span>
                  </span>
                  <span class="shrink-0 text-right">{{ .String "points" }}</span>
                </li>
                {{ end }}
              </ul>
          

# Dashboard
  - name: Dashboard
    hide-desktop-navigation: false
    width: slim
    columns:
      - size: full
        widgets:
          - type: search
            autofocus: true
            search-engine: google
            new-tab: true
            bangs:
              - title: Youtube
                shortcut: "!yt"
                url: https://www.youtube.com/results?search_query=!{query}
              - title: Github
                shortcut: "!gh"
                url: https://github.com/search?q=!{query}
          - type: monitor
            cache: 1m
            title: Services
            sites:
            - title: Audiobookshelf
              url: https://${AUDIOBOOKSHELF_HOSTNAME}
              icon: sh:audiobookshelf
              timeout: 5s
            - title: Traefik Dashboard
              url: https://${TRAEFIK_HOSTNAME}/dashboard/
              icon: sh:traefik
              timeout: 5s
            - title: n8n
              url: https://${N8N_HOSTNAME}
              icon: sh:n8n
              timeout: 5s
            - title: Uptime Kuma
              url: https://${UPTIME_KUMA_HOSTNAME}
              icon: sh:uptime-kuma
              timeout: 5s
            - title: Authelia
              url: https://${AUTHELIA_HOSTNAME}
              icon: sh:authelia
              timeout: 5s
            - title: Affine
              url: https://${AFFINE_HOSTNAME}
              icon: sh:affine
              timeout: 5s
            - title: Beszel
              url: https://${BESZEL_HOSTNAME}
              icon: sh:beszel
              timeout: 5s
      - size: small
        widgets:  
          - type: custom-api
            title: Beszel Metrics
            url: https://${BESZEL_HOSTNAME}/api/collections/systems/records
            method: GET
            options:
              redirect-url: "" # You must use "" and http:// or https://
            headers:
              Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjb2xsZWN0aW9uSWQiOiJfcGJfdXNlcnNfYXV0aF8iLCJleHAiOjE3NTkwNTE1NDMsImlkIjoiYjNyN3k0ZHFhYWR2NWs5IiwicmVmcmVzaGFibGUiOnRydWUsInR5cGUiOiJhdXRoIn0.rv9Ig57rFFtwTQTanyp18BvzbSmNn9HqKEUBf0F67j4
              Accept: application/json
            template: |
              {{ $redirect := .Options.StringOr "redirect-url" "" }}
              {{ $newTab := .Options.BoolOr "in-new-tab" false }}
              {{ $hideKernel := .Options.BoolOr "hide-kernel" true }}
              {{ $hideUptime := .Options.BoolOr "hide-uptime" false }}
              {{ $hideCPUInfo := .Options.BoolOr "hide-cpu-info" false }}
              {{ $hideIP := .Options.BoolOr "hide-ip" true }}
              {{ $collapsible := .Options.BoolOr "collapsible" false }}
              {{ $items := .JSON.Array "items" }}
              {{ range $items }}
                {{ $info := .Get "info" }}
                {{ $name := .String "name" }}
                {{ $link := "" }}
                {{ if ne $redirect "" }}
                  {{ $link = printf "%s/system/%s" $redirect $name }}
                {{ end }}
                <div style="font-size: 1.15em;">
                  {{ if eq (.String "status") "up" }}
                    <span class="status-dot color-positive">●</span>
                  {{ else }}
                    <span class="status-dot color-negative">●</span>
                  {{ end }}
                  {{ if ne $redirect "" }}
                    <a class="color-highlight text-truncate" href="{{ printf "%s/system/%s" $redirect $name | safeURL }}" {{ if $newTab }}target="_blank" rel="noopener"{{ end }}>
                      {{ $name }}{{ if not $hideIP }} ({{ .String "host" }}){{ end }}
                    </a>
                  {{ else }}
                    <span class="color-highlight text-truncate">
                      {{ $name }}{{ if not $hideIP }} ({{ .String "host" }}){{ end }}
                    </span>
                  {{ end }}
                </div>
                {{ if $collapsible }}
                  <details class="margin-top-5">
                    <summary class="size-h5 color-subtle" style="cursor: pointer;">Metrics</summary>
                    <div class="margin-top-5">
                      {{ if not $hideKernel }}
                        <p style="font-size: 1em;">Kernel: {{ $info.String "k" }}</p>
                      {{ end }}
                      {{ if not $hideUptime }}
                        {{ $uptimeSec := $info.Float "u" }}
                        {{ if ge $uptimeSec 86400.0 }}
                          <p style="font-size: 1em;">Uptime: {{ printf "%.2f" (mul $uptimeSec 0.000011574) }}d</p>
                        {{ else }}
                          <p style="font-size: 1em;">Uptime: {{ printf "%.2f" (mul $uptimeSec 0.000277778) }}h</p>
                        {{ end }}
                      {{ end }}
                      {{ if not $hideCPUInfo }}
                        <p style="font-size: 1em;">CPU: {{ replaceAll "CPU " "" ($info.String "m") }}</p>
                      {{ end }}
                      <p style="font-size: 1em; margin-top: 0.5em;">📊 Cpu: {{ $info.Float "cpu" }}%</p>
                      <p style="font-size: 1em;">🧠 Memory: {{ $info.Float "mp" }}%</p>
                      <p style="font-size: 1em;">💾 Disk: {{ $info.Float "dp" }}%</p>
                    </div>
                  </details>
                {{ else }}
                  <div class="margin-top-5">
                    {{ if not $hideKernel }}
                      <p style="font-size: 1em;">Kernel: {{ $info.String "k" }}</p>
                    {{ end }}
                    {{ if not $hideUptime }}
                      {{ $uptimeSec := $info.Float "u" }}
                      {{ if ge $uptimeSec 86400.0 }}
                        <p style="font-size: 1em;">Uptime: {{ printf "%.2f" (mul $uptimeSec 0.000011574) }}d</p>
                      {{ else }}
                        <p style="font-size: 1em;">Uptime: {{ printf "%.2f" (mul $uptimeSec 0.000277778) }}h</p>
                      {{ end }}
                    {{ end }}
                    {{ if not $hideCPUInfo }}
                      <p style="font-size: 1em;">CPU: {{ replaceAll "CPU " "" ($info.String "m") }}</p>
                    {{ end }}
                    <p style="font-size: 1em; margin-top: 0.5em;">📊 Cpu: {{ $info.Float "cpu" }}%</p>
                    <p style="font-size: 1em;">🧠 Memory: {{ $info.Float "mp" }}%</p>
                    <p style="font-size: 1em;">💾 Disk: {{ $info.Float "dp" }}%</p>
                  </div>
                {{ end }}
              {{ end }}
               
theme:
  background-color: 50 1 6
  primary-color: 24 97 58
  negative-color: 209 88 54
